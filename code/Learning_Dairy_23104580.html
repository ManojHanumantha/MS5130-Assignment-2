<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Manoj Hanumantha">

<title>Learning Dairy - MS5130 Assignment 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Learning_Dairy_23104580_files/libs/clipboard/clipboard.min.js"></script>
<script src="Learning_Dairy_23104580_files/libs/quarto-html/quarto.js"></script>
<script src="Learning_Dairy_23104580_files/libs/quarto-html/popper.min.js"></script>
<script src="Learning_Dairy_23104580_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Learning_Dairy_23104580_files/libs/quarto-html/anchor.min.js"></script>
<link href="Learning_Dairy_23104580_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Learning_Dairy_23104580_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Learning_Dairy_23104580_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Learning_Dairy_23104580_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Learning_Dairy_23104580_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Learning Dairy - MS5130 Assignment 2</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Manoj Hanumantha </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p><strong>Date: 16-02-2024</strong></p>
<p><strong>Problem Statement:</strong> Faced issues with non-UTF-8 encoded characters in the State column, which caused errors in subsequent data analysis.</p>
<p><img src="utf8.png" class="img-fluid"> <img src="no%20names%20in%20graph.png" class="img-fluid"></p>
<p><strong>Solution:</strong> Applied the iconv() function with the correct parameters to ensure all text was properly converted to UTF-8 encoding, avoiding any character encoding issues.</p>
<p><strong>UTF 8 conversion code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Standardize 'State' column encoding to UTF-8.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>Diwali_Sales_Data<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">iconv</span>(Diwali_Sales_Data<span class="sc">$</span>State, <span class="at">to =</span> <span class="st">"UTF-8"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="after%20utf8.png" class="img-fluid"></p>
<p><strong>Reference Link</strong> - https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/iconv</p>
<p><strong>Date: 18-02-2024</strong></p>
<p><strong>Problem Statement:</strong> Encountered a challenge with the ggplot2 bar chart of state-wise purchases not displaying due to factors not being ordered.</p>
<p><img src="graphs%20not%20in%20order.png" class="img-fluid"></p>
<p><strong>Initial code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state_wise_purchase, <span class="fu">aes</span>(<span class="at">x =</span> State, <span class="sc">-</span>state_wise_total, <span class="at">y =</span> state_wise_total , <span class="at">fill =</span> State)) <span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'State'</span>, <span class="at">y =</span> <span class="st">'State wise total sales'</span>) <span class="sc">+</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Solution:</strong> Used fct_reorder() within aes() to reorder the factor levels based on the state_wise_total to ensure the bar chart is displayed correctly.</p>
<p><strong>Enhanced code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state_wise_purchase, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(State, <span class="sc">-</span>state_wise_total), <span class="at">y =</span> state_wise_total , <span class="at">fill =</span> State)) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'State'</span>, <span class="at">y =</span> <span class="st">'State wise total sales'</span>) <span class="sc">+</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="graphs%20in%20order.png" class="img-fluid"></p>
<p><strong>Reference Link</strong> - https://www.geeksforgeeks.org/how-to-order-boxes-in-boxplot-with-fct_reorder-in-r/</p>
<p><strong>Date: 20-02-2024</strong></p>
<p><strong>Problem Statement:</strong> While attempting to create custom labels for a pie chart representing the top 5 product categories by sales, I encountered an error stating “non-numeric argument to mathematical function” and a warning about an unknown or uninitialized column percentage_share.</p>
<p><img src="label%20error.png" class="img-fluid"></p>
<p><strong>Initial code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>label <span class="ot">&lt;-</span> <span class="fu">paste</span>(top_5_categories<span class="sc">$</span>Product_Category, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>               <span class="st">"</span><span class="sc">\n</span><span class="st">Sales: "</span>, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>               scales<span class="sc">::</span><span class="fu">comma</span>(top_5_categories<span class="sc">$</span>category_wise_sales), </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">"</span><span class="sc">\n</span><span class="st">Percentage: "</span>, </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>               <span class="fu">round</span>(top_5_categories<span class="sc">$</span>percentage_share, <span class="dv">1</span>), </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"%"</span>, </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Solution</strong>: Upon inspection, I realized that the percentage_share column had not been created properly due to an error in the code. To rectify this, I first ensured that the category_wise_purchase dataframe contained the percentage_share column by correctly calculating it using the formula percentage_share = (category_wise_sales / sum(category_wise_sales)) * 100. After confirming the presence of the percentage_share column, I revisited the code for creating custom labels. The error occurred because the percentage_share column was not recognized as numeric. To address this, I modified the code to properly reference the percentage_share column from the category_wise_purchase dataframe rather than from top_5_categories. By ensuring that the correct dataframe was used, I resolved the error and successfully generated custom labels for the pie chart.</p>
<p><strong>Correct code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>label <span class="ot">&lt;-</span> <span class="fu">paste</span>(top_5_categories<span class="sc">$</span>Product_Category, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>               <span class="st">"</span><span class="sc">\n</span><span class="st">Sales: "</span>, </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>               scales<span class="sc">::</span><span class="fu">comma</span>(top_5_categories<span class="sc">$</span>category_wise_sales), </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">"</span><span class="sc">\n</span><span class="st">Percentage: "</span>, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>               <span class="fu">round</span>(category_wise_purchase<span class="sc">$</span>percentage_share[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="dv">1</span>), </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"%"</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reference Link</strong> - https://stackoverflow.com/questions/54845084/non-numeric-argument-to-mathematical-function-error-while-rounding-off-particula</p>
<p><strong>Date: 21-02-2024</strong></p>
<p><strong>Problem Statement:</strong> Had difficulty identifying the top 5 occupations contributing to sales due to a cluttered bar chart.</p>
<p><img src="all%20occupations.png" class="img-fluid"></p>
<p><strong>Solution:</strong> Limited the bar chart to the top 5 occupations by using head().</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Identifying top 5 occupations contributing to majority sales</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>sales_by_occupation <span class="ot">&lt;-</span> Diwali_Sales_Data <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Occupation) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_sales =</span> <span class="fu">sum</span>(Amount)) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_sales))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>top_5_occupations <span class="ot">&lt;-</span> <span class="fu">head</span>(sales_by_occupation, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reference</strong> - Week 3 tutorial recording.</p>
<p><img src="top5%20occupations.png" class="img-fluid"></p>
<p><strong>Date: 21-02-2024</strong></p>
<p><strong>Problem Statement:</strong> The bar graph displaying “Total Sales by Occupation” lacked clarity because the occupation names on the x-axis were overlapping, making them difficult to read.</p>
<p><img src="order1.png" class="img-fluid"> <img src="top5%20occupations.png" class="img-fluid"></p>
<p><strong>Solution:</strong> To enhance the visual appeal and readability of the graph, I modified the ggplot code to tilt the x-axis labels at a 45-degree angle. This was achieved by adding the theme() function with the axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1) argument to the existing ggplot code. The result was a much clearer graph, where each occupation label was distinct and legible. Did this for all the bar graphs that I had used in my analysis.</p>
<p><strong>Corrected code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot total sales for the top 5 occupations</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(top_5_occupations, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Occupation, <span class="sc">-</span>total_sales), <span class="at">y =</span> total_sales, <span class="at">fill =</span> Occupation)) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Sales by Top 5 Occupations"</span>, <span class="at">x =</span> <span class="st">"Occupation"</span>, <span class="at">y =</span> <span class="st">"Total Sales"</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reference</strong> - Question asked to Christopher and Siddhant in week 4 tutorial.</p>
<p><strong>Date: 19-03-2024</strong></p>
<p><strong>Problem Statement:</strong> Errors in package installation due to network issues or incorrect repository settings.</p>
<p><img src="cran%20error.png" class="img-fluid"></p>
<p><strong>Solution:</strong> Ensured the CRAN mirror was set correctly using options(repos = “https://cloud.r-project.org”) and checked the internet connection. If the problem persisted, I tried a different CRAN mirror or installed the packages during off-peak hours.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="st">"https://cloud.r-project.org"</span>)  <span class="co"># Set CRAN mirror</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reference Link -</strong> https://stackoverflow.com/questions/55244209/error-in-contrib-urlrepos-source-in-r-trying-to-use-cran-without-setting-a</p>
<p><strong>Date: 19-03-2024</strong></p>
<p><strong>Problem Statement:</strong> The working directory was not set correctly, leading to errors in importing datasets.</p>
<p><img src="working%20directory.png" class="img-fluid"></p>
<p><strong>Solution</strong>: Verified the path provided in setwd() was correct and accessible. I also ensured that the datasets were present in the specified directory.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the present working directory</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the working directory to the location where the datasets are present</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/Manoj/Desktop/Semester 2 Assignments/Applied Analytics in Business and Society/Assignment 3/FIFA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="after%20swd.png" class="img-fluid"></p>
<p><strong>Date: 19-03-2024</strong></p>
<p><strong>Problem Statement:</strong> While setting the working directory using setwd(“C:/Users/Manoj/Desktop/Semester 2 Assignments/Applied Analytics in Business and Society/Assignment 3/FIFA”), I encountered an error message.</p>
<p><img src="setwderr.png" class="img-fluid"></p>
<p><strong>Reference -</strong> Week 5 tutorial recording.</p>
<p><strong>Solution:</strong></p>
<p>The error likely occurred because the backslashes () in the file path need to be escaped with forward slashes (/) for R to interpret the path correctly on your operating system.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the working directory to the location where the datasets are present</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/Manoj/Desktop/Semester 2 Assignments/Applied Analytics in Business and Society/Assignment 3/FIFA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Explanation:</strong></p>
<p>Forward slashes (/) are the standard path separators in Unix-based systems. By escaping the backslashes with forward slashes, we ensure that the path is interpreted correctly regardless of the operating system.</p>
<p><strong>Reference</strong> - MS5130 Concepts: It’s essential to be familiar with different path separator conventions across operating systems.</p>
<p><strong>Date: 21-02-2024</strong></p>
<p><strong>Problem Statement:</strong> When attempting to combine the datasets using combined_data &lt;- matches %&gt;% inner_join(team_appearances, by = “match_id”) %&gt;% inner_join(player_appearances, by = “match_id”) %&gt;% inner_join(goals, by = “match_id”), I received an error message indicating that some columns might have mismatching names or data types.</p>
<p><img src="navalues.png" class="img-fluid"></p>
<p><strong>Solution:</strong></p>
<p>The error arises because the default join type in dplyr functions like inner_join is an inner join, which keeps only rows with matching values in all join columns. Misspelled column names or incompatible data types can cause mismatches.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine datasets using common columns</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>combined_data <span class="ot">&lt;-</span> matches <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(team_appearances, <span class="at">by =</span> <span class="st">"match_id"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(player_appearances, <span class="at">by =</span> <span class="st">"match_id"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(goals, <span class="at">by =</span> <span class="st">"match_id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But left also has a disadvantage of having many missing values.</p>
<p><img src="missing%20values.png" class="img-fluid"></p>
<p><strong>Reference</strong> - Doubt asked during week 11 tutorial session.</p>
<p><strong>Date: 23-02-2024</strong></p>
<p><strong>Problem Statement:</strong> The factor() function did not set the levels of the result.y variable correctly, affecting the modeling process.</p>
<p><img src="without%20factor.png" class="img-fluid"></p>
<p><strong>Solution:</strong> Specified the levels explicitly in the factor() function and used relevel() to set the reference category for the factor variable.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert result.y variable to a factor with specified levels</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>combined_data<span class="sc">$</span>result.y <span class="ot">&lt;-</span> <span class="fu">factor</span>(combined_data<span class="sc">$</span>result.y, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"win"</span>, <span class="st">"lose"</span>, <span class="st">"draw"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reference Link -</strong> https://stackoverflow.com/questions/18413756/re-ordering-factor-levels-in-data-frame</p>
<p><strong>Date: 26-03-2024</strong></p>
<p><strong>Problem Statement:</strong></p>
<p>I attempted to fit a multinomial logistic regression model using gam(result.y ~ home_team_score + away_team_score + goals_for, data = train_data), but received an error suggesting incorrect model family.</p>
<p><img src="without%20factor.png" class="img-fluid"> <strong>Solution:</strong></p>
<p>The error occurs because the result.y variable has multiple categories (“win”, “lose”, “draw”). The appropriate model family for such cases is multinomial, not the default Gaussian family used by glm or gam.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the multinomial logistic regression model</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">multinom</span>(result.y <span class="sc">~</span> home_team_score <span class="sc">+</span> away_team_score <span class="sc">+</span> goals_for, <span class="at">data =</span> train_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reference Link -</strong> https://www.geeksforgeeks.org/multinomial-logistic-regression-in-r/</p>
<p><strong>Date: 26-02-2024</strong></p>
<p><strong>Problem Statement:</strong> The random sampling for creating training and test datasets did not produce reproducible results.</p>
<p><strong>Solution:</strong> Set a seed using set.seed() before sampling to ensure reproducibility of the results.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert result.y variable to a factor with specified levels</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>combined_data<span class="sc">$</span>result.y <span class="ot">&lt;-</span> <span class="fu">factor</span>(combined_data<span class="sc">$</span>result.y, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"win"</span>, <span class="st">"lose"</span>, <span class="st">"draw"</span>))</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check unique values in result.y</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(combined_data<span class="sc">$</span>result.y)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for missing values in result.y</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(combined_data<span class="sc">$</span>result.y))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample size for training data, 70% training and 30% test data</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>train_size <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fl">0.7</span> <span class="sc">*</span> <span class="fu">nrow</span>(combined_data))</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate random indices for training data</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>train_indices <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">seq_len</span>(<span class="fu">nrow</span>(combined_data)), <span class="at">size =</span> train_size)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Create training and test datasets</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> combined_data[train_indices, ]</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> combined_data[<span class="sc">-</span>train_indices, ]</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Check unique values in result.y in train_data</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(train_data<span class="sc">$</span>result.y)</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if the "draw" category is present in the model</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="st">"draw"</span> <span class="sc">%in%</span> <span class="fu">levels</span>(train_data<span class="sc">$</span>result.y)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the reference category to "draw"</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>train_data<span class="sc">$</span>result.y <span class="ot">&lt;-</span> <span class="fu">relevel</span>(train_data<span class="sc">$</span>result.y, <span class="at">ref =</span> <span class="st">"draw"</span>)</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the multinomial logistic regression model</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">multinom</span>(result.y <span class="sc">~</span> home_team_score <span class="sc">+</span> away_team_score <span class="sc">+</span> goals_for, <span class="at">data =</span> train_data)</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on test data</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, <span class="at">newdata =</span> test_data)</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Check levels of result.y after modeling </span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(train_data<span class="sc">$</span>result.y)</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate accuracy</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>accuracy <span class="ot">&lt;-</span> <span class="fu">mean</span>(predictions <span class="sc">==</span> test_data<span class="sc">$</span>result.y)</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Print accuracy in %</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Accuracy:"</span>, <span class="fu">round</span>(accuracy <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>), <span class="st">"%"</span>))</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the model</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="win%20displayed.png" class="img-fluid"> <img src="win%20display2.png" class="img-fluid"> <strong>Explanation:</strong></p>
<p>In a multinomial logistic regression model, the reference category is used as a baseline against which other categories are compared. When the reference category is not specified explicitly, R automatically selects the category with the highest alphabetical order as the reference category.</p>
<p>In my case, before setting a reference for the multinomial regression model, the “win” category might not have been displayed in the model output because it might have been alphabetically ordered after other categories, such as “draw” and “lose.”</p>
<p>To set a specific reference category, such as “draw,” you can use the <code>relevel()</code> function in R.</p>
<p>By setting a reference category, we explicitly define which category should be used as the reference for comparison in the model output. This can help in interpreting the coefficients of other categories relative to the reference category, providing a clearer understanding of the model’s results.</p>
<p><strong>Reference Link -</strong> https://stats.oarc.ucla.edu/r/dae/multinomial-logistic-regression/</p>
<p><strong>Date: 30-03-2024</strong></p>
<p><strong>Problem Statement:</strong> The interactive bar chart created with plot_ly() might not have displayed the nationalities in descending order of count due to incorrect factor level ordering.</p>
<p><img src="player%20names.png" class="img-fluid"></p>
<p><strong>Solution:</strong> Reordered the factor levels of nationality in the nationality_data data frame using the fct_reorder() function from the forcats package to ensure the bar chart displayed nationalities in the correct order.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder the levels of nationality in descending order of count</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>nationality_data<span class="sc">$</span>nationality <span class="ot">&lt;-</span> <span class="fu">factor</span>(nationality_data<span class="sc">$</span>nationality, </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">levels =</span> <span class="fu">rev</span>(nationality_data<span class="sc">$</span>nationality))</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define custom colors for each nationality</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>custom_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Dutch"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>,     <span class="co"># Orange</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Arabic"</span> <span class="ot">=</span> <span class="st">"#008000"</span>,    <span class="co"># Green</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Scandinavian"</span> <span class="ot">=</span> <span class="st">"#ff69b4"</span>,  <span class="co"># Pink</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"German"</span> <span class="ot">=</span> <span class="st">"#000000"</span>,    <span class="co"># Black</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Spanish"</span> <span class="ot">=</span> <span class="st">"#d62728"</span>,   <span class="co"># Red</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"French"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>,    <span class="co"># Blue</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Italian"</span> <span class="ot">=</span> <span class="st">"#0000ff"</span>,   <span class="co"># Dark Blue</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Serbian"</span> <span class="ot">=</span> <span class="st">"#7f7f7f"</span>,   <span class="co"># Gray</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Icelandic"</span> <span class="ot">=</span> <span class="st">"#87ceeb"</span>  <span class="co"># Sky Blue</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder the custom colors accordingly</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>custom_colors <span class="ot">&lt;-</span> custom_colors[<span class="fu">levels</span>(nationality_data<span class="sc">$</span>nationality)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="player%20names1.png" class="img-fluid"></p>
<p><strong>Date: 1-04-2024</strong></p>
<p><strong>Problem Statement:</strong> Saving the interactive bar chart as an HTML widget using htmlwidgets::saveWidget() might have failed if the file path was not specified correctly or if there were permissions issues.</p>
<p><strong>Solution:</strong> Specified the correct file path and ensured that I had the necessary write permissions to save the HTML widget. If the problem persisted, I checked the htmlwidgets package documentation for additional troubleshooting steps.</p>
<p><strong>Reference Link -</strong> https://cran.r-project.org/web/packages/htmlwidgets/vignettes/develop_intro.html</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the plot as a html widget</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>htmlwidgets<span class="sc">::</span><span class="fu">saveWidget</span>(plot2, <span class="st">"player_position_distribution.html"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the plot </span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>plot2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Date: 02-04-2024</strong></p>
<p><strong>Problem Statement:</strong> While creating a line chart for goal distribution by minute, the summarise() function threw an error due to incorrect grouping variables.Initially I had used one more column minute_label which had unformatted data like 19’ for 19th minute.</p>
<p><img src="incorrect%20minute%20and%20goals.png" class="img-fluid"></p>
<p><strong>Solution:</strong> I ensured that the group_by() function was used correctly before summarizing to avoid any errors. The correct grouping should be based on minute_regulation only, not including match_id and goal_id.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Goal Distribution by Minute using a line chart</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping data by match_id, minute_label, and goal_id to count distinct goals</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>goal_distribution <span class="ot">&lt;-</span> combined_data <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(minute_regulation)) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(match_id, minute_regulation, goal_id) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">goals_count =</span> <span class="fu">n_distinct</span>(goal_id))</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping data by minute_label to sum up the goals count for each minute</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>goal_distribution <span class="ot">&lt;-</span> goal_distribution <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(minute_regulation) <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">goals_count =</span> <span class="fu">sum</span>(goals_count))</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting goal distribution by minute</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>plot3 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">x =</span> <span class="sc">~</span>goal_distribution<span class="sc">$</span>minute_regulation, <span class="at">y =</span> <span class="sc">~</span>goal_distribution<span class="sc">$</span>goals_count, </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">"scatter"</span>, <span class="at">mode =</span> <span class="st">"lines+markers"</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                 <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">'rgba(65, 105, 225, .6)'</span>), </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>                 <span class="at">line =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="st">"spline"</span>),</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>                 <span class="at">text =</span> hover_text) <span class="sc">%&gt;%</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Goal Distribution by Minute"</span>,</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Minute"</span>),</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Goals Count"</span>))</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the plot as a HTML widget</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>htmlwidgets<span class="sc">::</span><span class="fu">saveWidget</span>(plot3, <span class="st">"goal_distribution.html"</span>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>plot3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="before%20hover1.png" class="img-fluid"></p>
<p><strong>Reference</strong> - Had to revisit the dataset and saw that minute_regulation column was present which was used later to resolve the issue.</p>
<p><strong>Date: 03-04-2024</strong></p>
<p><strong>Problem Statement:</strong> The hover text in the plot_ly() function did not display as intended, causing confusion in interpreting the plot.</p>
<p><strong>Solution:</strong> I corrected the hover text by ensuring proper HTML tags were used and that the variables were referenced correctly within the paste() function.</p>
<p><strong>Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create hover text</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create hover text</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>hover_text <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"Minute = "</span>, goal_distribution<span class="sc">$</span>minute_regulation, <span class="st">"&lt;br&gt;Number of Goals = "</span>, goal_distribution<span class="sc">$</span>goals_count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="after%20hover.png" class="img-fluid"></p>
<p><strong>Reference Link:</strong> https://plotly.com/r/hover-text-and-formatting/</p>
<p><strong>Date: 04-04-2024</strong></p>
<p><strong>Problem Statement:</strong> The total sum of goals calculated did not match the expected value, leading to doubts about the accuracy of the analysis.</p>
<p><strong>Solution:</strong> I double-checked the data filtering and grouping steps to ensure that no duplicate counts were included in the goals_count calculation.</p>
<p><img src="correct%20goals.png" class="img-fluid"></p>
<p><strong>Reference</strong> - My own research and going through the dataset in excel to find the number of goals with sum function and then comparing it with the result of the above output.</p>
<p><strong>Date: 04-04-2024</strong></p>
<p><strong>Problem Statement:</strong> Encountered issues with the tm package functions not processing the text corpus as expected, resulting in an incomplete word cloud.</p>
<p><strong>Initial Code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>docs <span class="ot">&lt;-</span> docs <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeNumbers) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(tolower) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="incomplete%20word%20cloud.png" class="img-fluid"></p>
<p><strong>Solution:</strong> I verified each text processing step, such as removing numbers and punctuation, and ensured that the tm_map() function was applied correctly to the corpus.</p>
<p><strong>Enhanced code:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine text from multiple columns into a single corpus</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>text_corpus <span class="ot">&lt;-</span> <span class="fu">paste</span>(combined_data<span class="sc">$</span>match_name.x, combined_data<span class="sc">$</span>stadium_name.x, combined_data<span class="sc">$</span>city_name.x, combined_data<span class="sc">$</span>country_name.x, combined_data<span class="sc">$</span>team_name.x, combined_data<span class="sc">$</span>team_name.y, combined_data<span class="sc">$</span>player_team_name)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a corpus</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>docs <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(text_corpus))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean the text</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>docs <span class="ot">&lt;-</span> docs <span class="sc">%&gt;%</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeNumbers) <span class="sc">%&gt;%</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>))</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a document-term matrix</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">DocumentTermMatrix</span>(docs)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the matrix to a data frame</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>dtm_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.matrix</span>(dtm))</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute word frequencies</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>word_freq <span class="ot">&lt;-</span> <span class="fu">colSums</span>(dtm_df)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort words by frequency</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>sorted_word_freq <span class="ot">&lt;-</span> <span class="fu">sort</span>(word_freq, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a word cloud</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> <span class="fu">names</span>(sorted_word_freq), <span class="at">freq =</span> sorted_word_freq, <span class="at">min.freq =</span> <span class="dv">1</span>, <span class="at">max.words =</span> <span class="dv">200</span>, <span class="at">random.order =</span> <span class="cn">FALSE</span>, <span class="at">rot.per =</span> <span class="fl">0.35</span>, <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="complete%20word%20cloud.png" class="img-fluid"></p>
<p><strong>Reference</strong> - Week 11 Tutorial recording.</p>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>